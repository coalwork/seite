<head>
  <link rel="stylesheet" href="/styles/login.css">
  <script>
    const errorMessage = decodeURIComponent(location.hash).slice(1);
    location.hash = '';

    addEventListener('DOMContentLoaded', () => {
      if (errorMessage.length) {
        const error = document.querySelector('#error p');
        
        error.innerText = errorMessage;
        error.style.display = 'block';
      }
    });

    function submit(type) {
      if (!type) { throw Error('No type specified during submit'); }

      const form = document.getElementById('login');
      form.setAttribute('action', `/api/${type}`);
      form.dispatchEvent(new SubmitEvent('submit'));
    }

    addEventListener('DOMContentLoaded', () => {
      const [ login, register ] = document.getElementById('submit').children;
      login.addEventListener('click', submit.bind(null, 'login'));
      register.addEventListener('click', submit.bind(null, 'register'));
    });
  </script>
</head>
<body>
  <main>
    <form id="login" method="POST">
      <h1>Log In / Register</h1>
      <label>
        <span>Username:</span>
        <input type="text" name="username">
      </label>
      <label>
        <span>Password:</span>
        <input type="password" name="password">
      </label>
      <div id="error" style="display: none">
        <p></p>
      </div>
      <div id="submit">
        <button class="login" type="button">Log In</button
        ><button class="register" type="button">Register</button>
      </div>
    </form>
  </main>
</body>